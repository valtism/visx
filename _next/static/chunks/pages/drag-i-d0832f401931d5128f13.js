_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[102],{"/B0Q":function(n,e,t){"use strict";t.d(e,"b",(function(){return i})),t.d(e,"a",(function(){return a}));var r=t("W1cA");const i=Symbol("implicit");function a(){var n=new Map,e=[],t=[],o=i;function c(r){var a=r+"",c=n.get(a);if(!c){if(o!==i)return o;n.set(a,c=e.push(r))}return t[(c-1)%t.length]}return c.domain=function(t){if(!arguments.length)return e.slice();e=[],n=new Map;for(const r of t){const t=r+"";n.has(t)||n.set(t,e.push(r))}return c},c.range=function(n){return arguments.length?(t=Array.from(n),c):t.slice()},c.unknown=function(n){return arguments.length?(o=n,c):o},c.copy=function(){return a(e,t).unknown(o)},r.b.apply(c,arguments),c}},"201w":function(n,e,t){"use strict";t.d(e,"a",(function(){return i}));var r=t("J4UP");function i(n){return Object(r.a)(n)}},"9Hn9":function(n,e,t){"use strict";t.r(e);var r=t("jg1C"),i=(t("ERkP"),t("6wy5")),a=t("w3y7"),o=t("wEgr");e.default=function(){return Object(r.jsx)(i.a,{component:a.a,title:"Drag I",codeSandboxDirectoryName:"visx-drag-i",packageJson:o,children:"import React, { useMemo, useState, useEffect } from 'react';\nimport { scaleOrdinal } from '@visx/scale';\nimport { LinearGradient } from '@visx/gradient';\nimport { Drag, raise } from '@visx/drag';\nimport generateCircles, { Circle } from './generateCircles';\n\nconst colors = [\n  '#025aac',\n  '#02cff9',\n  '#02efff',\n  '#03aeed',\n  '#0384d7',\n  '#edfdff',\n  '#ab31ff',\n  '#5924d7',\n  '#d145ff',\n  '#1a02b1',\n  '#e582ff',\n  '#ff00d4',\n  '#270eff',\n  '#827ce2',\n];\n\nexport type DragIProps = {\n  width: number;\n  height: number;\n};\n\nexport default function DragI({ width, height }: DragIProps) {\n  const [draggingItems, setDraggingItems] = useState<Circle[]>([]);\n\n  useEffect(() => {\n    if (width > 10 && height > 10) setDraggingItems(generateCircles({ width, height }));\n  }, [width, height]);\n\n  const colorScale = useMemo(\n    () =>\n      scaleOrdinal({\n        range: colors,\n        domain: draggingItems.map((d) => d.id),\n      }),\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [width, height],\n  );\n\n  if (draggingItems.length === 0 || width < 10) return null;\n\n  return (\n    <div className=\"Drag\" style={{ touchAction: 'none' }}>\n      <svg width={width} height={height}>\n        <LinearGradient id=\"stroke\" from=\"#ff00a5\" to=\"#ffc500\" />\n        <rect fill=\"#c4c3cb\" width={width} height={height} rx={14} />\n\n        {draggingItems.map((d, i) => (\n          <Drag\n            key={`drag-${d.id}`}\n            width={width}\n            height={height}\n            x={d.x}\n            y={d.y}\n            onDragStart={() => {\n              // svg follows the painter model\n              // so we need to move the data item\n              // to end of the array for it to be drawn\n              // \"on top of\" the other data items\n              setDraggingItems(raise(draggingItems, i));\n            }}\n          >\n            {({ dragStart, dragEnd, dragMove, isDragging, x, y, dx, dy }) => (\n              <circle\n                key={`dot-${d.id}`}\n                cx={x}\n                cy={y}\n                r={isDragging ? d.radius + 4 : d.radius}\n                fill={isDragging ? 'url(#stroke)' : colorScale(d.id)}\n                transform={`translate(${dx}, ${dy})`}\n                fillOpacity={0.9}\n                stroke={isDragging ? 'white' : 'transparent'}\n                strokeWidth={2}\n                onMouseMove={dragMove}\n                onMouseUp={dragEnd}\n                onMouseDown={dragStart}\n                onTouchStart={dragStart}\n                onTouchMove={dragMove}\n                onTouchEnd={dragEnd}\n              />\n            )}\n          </Drag>\n        ))}\n      </svg>\n      <div className=\"deets\">\n        <div>\n          Based on Mike Bostock's{' '}\n          <a href=\"https://bl.ocks.org/mbostock/c206c20294258c18832ff80d8fd395c3\">\n            Circle Dragging II\n          </a>\n        </div>\n      </div>\n\n      <style jsx>{`\n        .Drag {\n          display: flex;\n          flex-direction: column;\n          user-select: none;\n        }\n\n        svg {\n          margin: 1rem 0;\n        }\n        .deets {\n          display: flex;\n          flex-direction: row;\n          font-size: 12px;\n        }\n        .deets > div {\n          margin: 0.25rem;\n        }\n      `}</style>\n    </div>\n  );\n}\n"})}},"Cf/J":function(n,e,t){"use strict";t.d(e,"a",(function(){return u}));var r=t("aWzz"),i=t.n(r),a=t("ERkP"),o=t.n(a),c=["children","id","from","to","x1","y1","x2","y2","fromOffset","fromOpacity","toOffset","toOpacity","rotate","transform","vertical"];function s(){return(s=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n}).apply(this,arguments)}function u(n){var e=n.children,t=n.id,r=n.from,i=n.to,a=n.x1,u=n.y1,d=n.x2,f=n.y2,l=n.fromOffset,g=void 0===l?"0%":l,h=n.fromOpacity,x=void 0===h?1:h,y=n.toOffset,p=void 0===y?"100%":y,m=n.toOpacity,v=void 0===m?1:m,b=n.rotate,O=n.transform,j=n.vertical,w=void 0===j||j,E=function(n,e){if(null==n)return{};var t,r,i={},a=Object.keys(n);for(r=0;r<a.length;r++)t=a[r],e.indexOf(t)>=0||(i[t]=n[t]);return i}(n,c),S=a,D=d,T=u,k=f;return!w||S||D||T||k||(S="0",D="0",T="0",k="1"),o.a.createElement("defs",null,o.a.createElement("linearGradient",s({id:t,x1:S,y1:T,x2:D,y2:k,gradientTransform:b?"rotate("+b+")":O},E),!!e&&e,!e&&o.a.createElement("stop",{offset:g,stopColor:r,stopOpacity:x}),!e&&o.a.createElement("stop",{offset:p,stopColor:i,stopOpacity:v})))}u.propTypes={id:i.a.string.isRequired,from:i.a.string,to:i.a.string,x1:i.a.oneOfType([i.a.string,i.a.number]),x2:i.a.oneOfType([i.a.string,i.a.number]),y1:i.a.oneOfType([i.a.string,i.a.number]),y2:i.a.oneOfType([i.a.string,i.a.number]),fromOffset:i.a.oneOfType([i.a.string,i.a.number]),fromOpacity:i.a.oneOfType([i.a.string,i.a.number]),toOffset:i.a.oneOfType([i.a.string,i.a.number]),toOpacity:i.a.oneOfType([i.a.string,i.a.number]),rotate:i.a.oneOfType([i.a.string,i.a.number]),transform:i.a.string,children:i.a.node,vertical:i.a.bool}},"D+es":function(n,e,t){"use strict";t.d(e,"a",(function(){return o}));var r=t("/B0Q"),i=t("xx0A"),a=Object(i.b)("domain","range","reverse","unknown");function o(n){return a(Object(r.a)(),n)}},J4UP:function(n,e,t){"use strict";t.d(e,"a",(function(){return i}));const r=1/4294967296;function i(n=Math.random()){let e=0|(0<=n&&n<1?n/r:Math.abs(n));return()=>(e=1664525*e+1013904223|0,r*(e>>>0))}},LHst:function(n,e,t){"use strict";t.d(e,"a",(function(){return i}));var r=t("rkTo");function i(n,e){return new r.a({x:n.x+e.x,y:n.y+e.y})}},OSpJ:function(n,e,t){"use strict";t.d(e,"a",(function(){return g}));var r=t("ERkP"),i=t("rkTo"),a=t("Q0jm"),o=t("LHst"),c=t("jpI8");function s(n,e,t){return Math.min(Math.max(n,e),t)}function u(n,e){var t="undefined"!==typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(t)return(t=t.call(n)).next.bind(t);if(Array.isArray(n)||(t=function(n,e){if(!n)return;if("string"===typeof n)return d(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);"Object"===t&&n.constructor&&(t=n.constructor.name);if("Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return d(n,e)}(n))||e&&n&&"number"===typeof n.length){t&&(n=t);var r=0;return function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function f(n,e,t){var r,i,a,o;return void 0===t&&(t={}),e.length>0?function(n,e){for(var t,r=n,i=1/0,a=u(e);!(t=a()).done;){var o=t.value,c=Math.sqrt(Math.pow(o.x-n.x,2)+Math.pow(o.y-n.y,2));c<i&&(i=c,r={x:o.x,y:o.y})}return r}(n,e):{x:s(n.x,null!=(r=t.xMin)?r:-1/0,null!=(i=t.xMax)?i:1/0),y:s(n.y,null!=(a=t.yMin)?a:-1/0,null!=(o=t.yMax)?o:1/0)}}function l(){return(l=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n}).apply(this,arguments)}function g(n){var e=void 0===n?{}:n,t=e.resetOnStart,s=void 0!==t&&t,u=e.snapToPointer,d=void 0===u||u,g=e.onDragEnd,h=e.onDragMove,x=e.onDragStart,y=e.x,p=e.y,m=e.dx,v=e.dy,b=e.isDragging,O=e.restrict,j=void 0===O?{}:O,w=e.restrictToPath,E=Object(r.useRef)({x:y,y:p,dx:m,dy:v}),S=function(n){var e=Object(r.useState)(n),t=e[0],i=e[1],a=Object(r.useRef)(null),o=Object(r.useCallback)((function(n,e){a.current=e||null,i(n)}),[i]);return Object(r.useLayoutEffect)((function(){a.current&&(a.current(t),a.current=null)}),[t]),[t,o]}({x:y,y:p,dx:null!=m?m:0,dy:null!=v?v:0,isDragging:!1}),D=S[0],T=S[1],k=Object(r.useState)(new i.a({x:0,y:0})),M=k[0],C=k[1];Object(r.useEffect)((function(){E.current.x===y&&E.current.y===p&&E.current.dx===m&&E.current.dy===v||(E.current={x:y,y:p,dx:m,dy:v},T((function(n){return l({},n,{x:y,y:p,dx:null!=m?m:0,dy:null!=v?v:0})})))})),Object(r.useEffect)((function(){void 0!==b&&D.isDragging!==b&&T((function(n){return l({},n,{isDragging:b})}))}),[D.isDragging,b,T]);var _=function(n){return Object(r.useMemo)((function(){if(!n)return[];var e=n.getCTM()||new DOMMatrix;return function(n,e,t){if(void 0===t&&(t=1),!n)return[];for(var r=[],i=n.getTotalLength(),a=0;a<=i;a+=t){var o=n.getPointAtLength(a).matrixTransform(e);r.push(o)}return r}(n,e)}),[null==n?void 0:n.getTotalLength()])}(w),I=Object(r.useCallback)((function(n){n.persist(),T((function(e){var t=e.x,r=void 0===t?0:t,o=e.y,u=void 0===o?0:o,l=e.dx,g=e.dy,h=new i.a({x:(r||0)+l,y:(u||0)+g}),x=Object(c.a)(n)||new i.a({x:0,y:0}),y=f(d?x:h,_,j);return C(Object(a.a)(h,x)),{isDragging:!0,dx:s?0:e.dx,dy:s?0:e.dy,x:s?y.x:y.x-e.dx,y:s?y.y:y.y-e.dy}}),x&&function(e){x(l({},e,{event:n}))})}),[x,s,j,_,T,d]),P=Object(r.useCallback)((function(n){n.persist(),T((function(e){if(!e.isDragging)return e;var t=e.x,r=void 0===t?0:t,a=e.y,s=void 0===a?0:a,u=Object(c.a)(n)||new i.a({x:0,y:0}),g=f(d?u:Object(o.a)(u,M),_,j);return l({},e,{dx:g.x-r,dy:g.y-s})}),h&&function(e){e.isDragging&&h(l({},e,{event:n}))})}),[T,h,d,M,_,j]),A=Object(r.useCallback)((function(n){n.persist(),T((function(n){return l({},n,{isDragging:!1})}),g&&function(e){g(l({},e,{event:n}))})}),[g,T]);return l({},D,{dragEnd:A,dragMove:P,dragStart:I})}},Q0jm:function(n,e,t){"use strict";t.d(e,"a",(function(){return i}));var r=t("rkTo");function i(n,e){return new r.a({x:n.x-e.x,y:n.y-e.y})}},"VB+g":function(n,e,t){"use strict";t.d(e,"a",(function(){return c}));var r=t("rkTo"),i=t("ZQHj");function a(){return(a=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n}).apply(this,arguments)}var o={x:0,y:0};function c(n,e){if(!n||!e)return null;var t=function(n){if(!n)return a({},o);if(Object(i.g)(n))return n.changedTouches.length>0?{x:n.changedTouches[0].clientX,y:n.changedTouches[0].clientY}:a({},o);if(Object(i.c)(n))return{x:n.clientX,y:n.clientY};var e=null==n?void 0:n.target,t=e&&"getBoundingClientRect"in e?e.getBoundingClientRect():null;return t?{x:t.x+t.width/2,y:t.y+t.height/2}:a({},o)}(e),c=Object(i.d)(n)?n.ownerSVGElement:n,s=Object(i.e)(c)?c.getScreenCTM():null;if(Object(i.f)(c)&&s){var u=c.createSVGPoint();return u.x=t.x,u.y=t.y,u=u.matrixTransform(s.inverse()),new r.a({x:u.x,y:u.y})}var d=n.getBoundingClientRect();return new r.a({x:t.x-d.left-n.clientLeft,y:t.y-d.top-n.clientTop})}},ZQHj:function(n,e,t){"use strict";function r(n){return!!n&&n instanceof Element}function i(n){return!!n&&(n instanceof SVGElement||"ownerSVGElement"in n)}function a(n){return!!n&&"createSVGPoint"in n}function o(n){return!!n&&"getScreenCTM"in n}function c(n){return!!n&&"changedTouches"in n}function s(n){return!!n&&"clientX"in n}function u(n){return!!n&&(n instanceof Event||"nativeEvent"in n&&n.nativeEvent instanceof Event)}t.d(e,"a",(function(){return r})),t.d(e,"d",(function(){return i})),t.d(e,"f",(function(){return a})),t.d(e,"e",(function(){return o})),t.d(e,"g",(function(){return c})),t.d(e,"c",(function(){return s})),t.d(e,"b",(function(){return u}))},jpI8:function(n,e,t){"use strict";t.d(e,"a",(function(){return a}));var r=t("VB+g"),i=t("ZQHj");function a(n,e){if(Object(i.a)(n)&&e)return Object(r.a)(n,e);if(Object(i.b)(n)){var t=n,a=t.target;if(a)return Object(r.a)(a,t)}return null}},miXs:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/drag-i",function(){return t("9Hn9")}])},rkTo:function(n,e,t){"use strict";function r(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}t.d(e,"a",(function(){return i}));var i=function(){function n(n){var e=n.x,t=void 0===e?0:e,i=n.y,a=void 0===i?0:i;r(this,"x",0),r(this,"y",0),this.x=t,this.y=a}var e=n.prototype;return e.value=function(){return{x:this.x,y:this.y}},e.toArray=function(){return[this.x,this.y]},n}()},w3y7:function(n,e,t){"use strict";t.d(e,"a",(function(){return m}));var r=t("jg1C"),i=t("yFcC"),a=t.n(i),o=t("ERkP"),c=t.n(o),s=t("D+es"),u=t("Cf/J"),d=t("aWzz"),f=t.n(d),l=t("OSpJ");function g(n){var e=n.captureDragArea,t=void 0===e||e,r=n.snapToPointer,i=void 0===r||r,a=n.children,o=n.dx,s=n.dy,u=n.height,d=n.onDragEnd,f=n.onDragMove,g=n.onDragStart,h=n.resetOnStart,x=n.width,y=n.x,p=n.y,m=n.isDragging,v=n.restrict,b=n.restrictToPath,O=Object(l.a)({resetOnStart:h,snapToPointer:i,onDragEnd:d,onDragMove:f,onDragStart:g,x:y,y:p,dx:o,dy:s,isDragging:m,restrict:v,restrictToPath:b});return c.a.createElement(c.a.Fragment,null,O.isDragging&&t&&c.a.createElement("rect",{width:x,height:u,onPointerDown:O.dragStart,onPointerMove:O.dragMove,onPointerUp:O.dragEnd,fill:"transparent"}),a(O))}g.propTypes={children:f.a.func.isRequired,width:f.a.number.isRequired,height:f.a.number.isRequired,captureDragArea:f.a.bool,isDragging:f.a.bool};var h=t("201w"),x=function(n){var e=n.width,t=n.height,r=Object(h.a)(.2),i=Object(h.a)(.3),a=Object(h.a)(.4);return new Array(e<360?40:185).fill(1).map((function(n,o){var c=25-20*r();return{id:"".concat(o),radius:c,x:Math.round(i()*(e-2*c)+c),y:Math.round(a()*(t-2*c)+c)}}))},y=x;try{x.displayName="generateCircles",x.__docgenInfo={description:"",displayName:"generateCircles",props:{width:{defaultValue:null,description:"",name:"width",required:!0,type:{name:"number"}},height:{defaultValue:null,description:"",name:"height",required:!0,type:{name:"number"}}}},"undefined"!==typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/sandboxes/visx-drag-i/generateCircles.ts#generateCircles"]={docgenInfo:x.__docgenInfo,name:"generateCircles",path:"src/sandboxes/visx-drag-i/generateCircles.ts#generateCircles"})}catch(v){}var p=["#025aac","#02cff9","#02efff","#03aeed","#0384d7","#edfdff","#ab31ff","#5924d7","#d145ff","#1a02b1","#e582ff","#ff00d4","#270eff","#827ce2"];function m(n){var e=n.width,t=n.height,i=Object(o.useState)([]),c=i[0],d=i[1];Object(o.useEffect)((function(){e>10&&t>10&&d(y({width:e,height:t}))}),[e,t]);var f=Object(o.useMemo)((function(){return Object(s.a)({range:p,domain:c.map((function(n){return n.id}))})}),[e,t]);return 0===c.length||e<10?null:Object(r.jsxs)("div",{style:{touchAction:"none"},className:"jsx-856181217 Drag",children:[Object(r.jsxs)("svg",{width:e,height:t,className:"jsx-856181217",children:[Object(r.jsx)(u.a,{id:"stroke",from:"#ff00a5",to:"#ffc500"}),Object(r.jsx)("rect",{fill:"#c4c3cb",width:e,height:t,rx:14,className:"jsx-856181217"}),c.map((function(n,i){return Object(r.jsx)(g,{width:e,height:t,x:n.x,y:n.y,onDragStart:function(){d(function(n,e){var t=[].concat(n),r=t.length-1,i=t.splice(e,1)[0];return t.splice(r,0,i),t}(c,i))},children:function(e){var t=e.dragStart,i=e.dragEnd,a=e.dragMove,o=e.isDragging,c=e.x,s=e.y,u=e.dx,d=e.dy;return Object(r.jsx)("circle",{cx:c,cy:s,r:o?n.radius+4:n.radius,fill:o?"url(#stroke)":f(n.id),transform:"translate(".concat(u,", ").concat(d,")"),fillOpacity:.9,stroke:o?"white":"transparent",strokeWidth:2,onMouseMove:a,onMouseUp:i,onMouseDown:t,onTouchStart:t,onTouchMove:a,onTouchEnd:i,className:"jsx-856181217"},"dot-".concat(n.id))}},"drag-".concat(n.id))}))]}),Object(r.jsx)("div",{className:"jsx-856181217 deets",children:Object(r.jsxs)("div",{className:"jsx-856181217",children:["Based on Mike Bostock's"," ",Object(r.jsx)("a",{href:"https://bl.ocks.org/mbostock/c206c20294258c18832ff80d8fd395c3",className:"jsx-856181217",children:"Circle Dragging II"})]})}),Object(r.jsx)(a.a,{id:"856181217",children:[".Drag.jsx-856181217{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}","svg.jsx-856181217{margin:1rem 0;}",".deets.jsx-856181217{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;font-size:12px;}",".deets.jsx-856181217>div.jsx-856181217{margin:0.25rem;}"]})]})}try{Example.displayName="Example",Example.__docgenInfo={description:"",displayName:"Example",props:{width:{defaultValue:null,description:"",name:"width",required:!0,type:{name:"number"}},height:{defaultValue:null,description:"",name:"height",required:!0,type:{name:"number"}}}},"undefined"!==typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/sandboxes/visx-drag-i/Example.tsx#Example"]={docgenInfo:Example.__docgenInfo,name:"Example",path:"src/sandboxes/visx-drag-i/Example.tsx#Example"})}catch(v){}},wEgr:function(n){n.exports=JSON.parse('{"name":"@visx/demo-drag-i","description":"Standalone visx drag demo.","main":"index.tsx","private":true,"dependencies":{"@babel/runtime":"^7.8.4","@types/react":"^17","@types/react-dom":"^17","@visx/drag":"latest","@visx/gradient":"latest","@visx/mock-data":"latest","@visx/responsive":"latest","@visx/scale":"latest","react":"^17","react-dom":"^17","react-scripts-ts":"3.1.0","typescript":"^3"},"keywords":["visualization","d3","react","visx","drag"]}')}},[["miXs",0,2,1,3,4,6]]]);